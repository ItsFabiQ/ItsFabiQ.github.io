<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metro exodus guessr</title>
    <link rel="icon" type="image/x-icon" href="/pictures/logo/spartaorder.webp">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"/>
    <link rel="stylesheet" href="./styles/style.css">
</head>
<body>



  <div id="panorama"></div>
  <div id="map-container">
  <img id="game-map" src="/pictures/maps/Volga.webp" alt="Metro map">
  <div id="map-pin"></div>
  <button id="confirm-btn" disabled>Confirm Guess</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
  <script>

    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    const currentpanorama = getRandomInt(1,1);
    pannellum.viewer('panorama', {
      "type": "equirectangular",
      "panorama": `/pictures/360panoramas/${currentpanorama}.jpg`,
      "autoLoad": true,
      "compass": false,
      "showZoomCtrl": true,
      "hotSpots": [

      ]
    });
    const locations = {
      1: { x: 131, y: 373 }, 
    };

    const map = document.getElementById("game-map");
    const pin = document.getElementById("map-pin");
    const confirmBtn = document.getElementById("confirm-btn");

    map.addEventListener("click", (e) => {
      const rect = map.getBoundingClientRect();
      const x = e.clientX - rect.left; 
      const y = e.clientY - rect.top; 
      let answer = locations[currentpanorama];
      console.log("Player guessed at:", x, y);
        let dx = x - answer.x;
        let dy = y - answer.y;
        let distance = Math.sqrt(dx*dx + dy*dy);

        alert(`Your guess was ${Math.round(distance)}px away from the real location!`);

    });
  </script>


    
</body>
</html>
